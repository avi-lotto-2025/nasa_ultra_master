import random
from collections import Counter

# ============================================================
#                 NASA_ULTRA - Stable Engine V1
#            Minimal, Solid, Predictable, Cloud Safe
# ============================================================

# היסטוריית ההגרלות (נכניס ידנית לפי מה שיש לך)
HISTORY = [
    [1, 3, 8, 23, 26, 34],
    [1, 3, 11, 25, 30, 33],
    [4, 8, 18, 23, 35, 36],
    [15, 24, 26, 28, 30, 36],
    [2, 6, 11, 15, 23, 33],
    [11, 13, 18, 23, 24, 30],
    [9, 22, 23, 24, 25, 29],
    [2, 12, 13, 19, 21, 34],
    [7, 8, 19, 27, 30, 35],
    [4, 14, 22, 27, 30, 33],
    [2, 12, 16, 17, 26, 32],
    [6, 16, 20, 21, 22, 34],
    [13, 16, 18, 19, 29, 30],
    [4, 26, 27, 32, 36],
    [4, 7, 10, 21, 27, 28],
    [3, 6, 19, 24, 29, 37],
    [12, 19, 30, 32, 34, 35],
    [7, 17, 29, 33, 35],
    [4, 10, 19, 20, 25, 28],
    [6, 11, 12, 19, 34, 36],
    [2, 11, 14, 26, 27, 30],
    [1, 3, 20, 26, 29, 34],
    [1, 7, 12, 14, 22, 26],
    [11, 16, 24, 25, 35, 36],
    [10, 12, 14, 27, 28, 31]
]

# ============================================================
#                מנוע חיזוי יציב ופשוט
# ============================================================

def generate_forecast():
    """חיזוי יציב לפי שכיחויות, ללא מורכבות מסוכנת."""
    
    # איסוף כל המספרים
    all_numbers = []
    for draw in HISTORY:
        all_numbers.extend(draw)

    # ספירת שכיחויות
    freq = Counter(all_numbers)

    # לקחת את 6 המספרים הכי שכיחים
    main = [num for num, count in freq.most_common(6)]
    main.sort()

    # מספר בונוס חכם מתוך 1-37 שלא נכלל כבר
    bonus_candidates = [n for n in range(1, 38) if n not in main]
    bonus = random.choice(bonus_candidates)

    return {
        "main": main,
        "extra": bonus
    }
